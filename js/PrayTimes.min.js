function PrayTimes(n){var b={imsak:"Imsak",fajr:"Fajr",sunrise:"Sunrise",dhuhr:"Dhuhr",asr:"Asr",sunset:"Sunset",maghrib:"Maghrib",isha:"Isha",midnight:"Midnight"},i={MWL:{name:"Muslim World League",params:{fajr:18,isha:17}},ISNA:{name:"Islamic Society of North America (ISNA)",params:{fajr:15,isha:15}},Egypt:{name:"Egyptian General Authority of Survey",params:{fajr:19.5,isha:17.5}},Makkah:{name:"Umm Al-Qura University, Makkah",params:{fajr:18.5,isha:"90 min"}},Karachi:{name:"University of Islamic Sciences, Karachi",params:{fajr:18,isha:18}},Tehran:{name:"Institute of Geophysics, University of Tehran",params:{fajr:17.7,isha:14,maghrib:4.5,midnight:"Jafari"}},Jafari:{name:"Shia Ithna-Ashari, Leva Institute, Qum",params:{fajr:16,isha:14,maghrib:4,midnight:"Jafari"}}},k={maghrib:"0 min",midnight:"Standard"},u="MWL",t={imsak:"10 min",dhuhr:"0 min",asr:"Standard",highLats:"NightMiddle"},l="24h",g=["am","pm"],d="-----",w=1,e={},f,c,y,p,o,v=k,s,r,a,h;for(h in i){r=i[h].params;for(s in v)typeof r[s]=="undefined"&&(r[s]=v[s])}u=i[n]?n:u,r=i[u].params;for(a in r)t[a]=r[a];for(h in b)e[h]=0;return{setMethod:function(n){i[n]&&(this.adjust(i[n].params),u=n)},adjust:function(n){for(var i in n)t[i]=n[i]},tune:function(n){for(var t in n)e[t]=n[t]},getMethod:function(){return u},getSetting:function(){return t},getOffsets:function(){return e},getDefaults:function(){return i},getTimes:function(n,t,i,r,u){return f=1*t[0],c=1*t[1],y=t[2]?1*t[2]:0,l=u||l,n.constructor===Date&&(n=[n.getFullYear(),n.getMonth()+1,n.getDate()]),(typeof i=="undefined"||i=="auto")&&(i=this.getTimeZone(n)),(typeof r=="undefined"||r=="auto")&&(r=this.getDst(n)),p=1*i+(1*r?1:0),o=this.julian(n[0],n[1],n[2])-c/360,this.computeTimes()},getFormattedTime:function(n,t,i){if(isNaN(n))return d;if(t=="Float")return n;i=i||g,n=DMath.fixHour(n+.5/60);var r=Math.floor(n),e=Math.floor((n-r)*60),u=t=="12h"?i[r<12?0:1]:"",f=t=="24h"?this.twoDigitsFormat(r):(r+12-1)%12+1;return f+":"+this.twoDigitsFormat(e)+(u?" "+u:"")},midDay:function(n){var i=this.sunPosition(o+n).equation;return DMath.fixHour(12-i)},sunAngleTime:function(n,t,i){var u=this.sunPosition(o+t).declination,e=this.midDay(t),r=1/15*DMath.arccos((-DMath.sin(n)-DMath.sin(u)*DMath.sin(f))/(DMath.cos(u)*DMath.cos(f)));return e+(i=="ccw"?-r:r)},asrTime:function(n,t){var r=this.sunPosition(o+t).declination,i=-DMath.arccot(n+DMath.tan(Math.abs(f-r)));return this.sunAngleTime(i,t)},sunPosition:function(n){var r=n-2451545,t=DMath.fixAngle(357.529+.98560028*r),f=DMath.fixAngle(280.459+.98564736*r),i=DMath.fixAngle(f+1.915*DMath.sin(t)+.02*DMath.sin(2*t)),h=1.00014-.01671*DMath.cos(t)-.00014*DMath.cos(2*t),u=23.439-36e-8*r,s=DMath.arctan2(DMath.cos(u)*DMath.sin(i),DMath.cos(i))/15,e=f/15-DMath.fixHour(s),o=DMath.arcsin(DMath.sin(u)*DMath.sin(i));return{declination:o,equation:e}},julian:function(n,t,i){t<=2&&(n-=1,t+=12);var r=Math.floor(n/100),f=2-r+Math.floor(r/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(t+1))+i+f-1524.5},computePrayerTimes:function(n){n=this.dayPortion(n);var i=t,s=this.sunAngleTime(this.eval(i.imsak),n.imsak,"ccw"),o=this.sunAngleTime(this.eval(i.fajr),n.fajr,"ccw"),c=this.sunAngleTime(this.riseSetAngle(),n.sunrise,"ccw"),h=this.midDay(n.dhuhr),u=this.asrTime(this.asrFactor(i.asr),n.asr),r=this.sunAngleTime(this.riseSetAngle(),n.sunset),e=this.sunAngleTime(this.eval(i.maghrib),n.maghrib),f=this.sunAngleTime(this.eval(i.isha),n.isha);return{imsak:s,fajr:o,sunrise:c,dhuhr:h,asr:u,sunset:r,maghrib:e,isha:f}},computeTimes:function(){for(var n={imsak:5,fajr:5,sunrise:6,dhuhr:12,asr:13,sunset:18,maghrib:18,isha:18},i=1;i<=w;i++)n=this.computePrayerTimes(n);return n=this.adjustTimes(n),n.midnight=t.midnight=="Jafari"?n.sunset+this.timeDiff(n.sunset,n.fajr)/2:n.sunset+this.timeDiff(n.sunset,n.sunrise)/2,n=this.tuneTimes(n),this.modifyFormats(n)},adjustTimes:function(n){var i=t,r;for(r in n)n[r]+=p-c/15;return i.highLats!="None"&&(n=this.adjustHighLats(n)),this.isMin(i.imsak)&&(n.imsak=n.fajr-this.eval(i.imsak)/60),this.isMin(i.maghrib)&&(n.maghrib=n.sunset+this.eval(i.maghrib)/60),this.isMin(i.isha)&&(n.isha=n.maghrib+this.eval(i.isha)/60),n.dhuhr+=this.eval(i.dhuhr)/60,n},asrFactor:function(n){var t={Standard:1,Hanafi:2}[n];return t||this.eval(n)},riseSetAngle:function(){var n=.0347*Math.sqrt(y);return.833+n},tuneTimes:function(n){for(var t in n)n[t]+=e[t]/60;return n},modifyFormats:function(n){for(var t in n)n[t]=this.getFormattedTime(n[t],l);return n},adjustHighLats:function(n){var r=t,i=this.timeDiff(n.sunset,n.sunrise);return n.imsak=this.adjustHLTime(n.imsak,n.sunrise,this.eval(r.imsak),i,"ccw"),n.fajr=this.adjustHLTime(n.fajr,n.sunrise,this.eval(r.fajr),i,"ccw"),n.isha=this.adjustHLTime(n.isha,n.sunset,this.eval(r.isha),i),n.maghrib=this.adjustHLTime(n.maghrib,n.sunset,this.eval(r.maghrib),i),n},adjustHLTime:function(n,t,i,r,u){var f=this.nightPortion(i,r),e=u=="ccw"?this.timeDiff(n,t):this.timeDiff(t,n);return(isNaN(n)||e>f)&&(n=t+(u=="ccw"?-f:f)),n},nightPortion:function(n,i){var u=t.highLats,r=1/2;return u=="AngleBased"&&(r=1/60*n),u=="OneSeventh"&&(r=1/7),r*i},dayPortion:function(n){for(var t in n)n[t]/=24;return n},getTimeZone:function(n){var t=n[0],r=this.gmtOffset([t,0,1]),i=this.gmtOffset([t,6,1]);return Math.min(r,i)},getDst:function(n){return 1*(this.gmtOffset(n)!=this.getTimeZone(n))},gmtOffset:function(n){var i=new Date(n[0],n[1]-1,n[2],12,0,0,0),t=i.toGMTString(),u=new Date(t.substring(0,t.lastIndexOf(" ")-1));return(i-u)/36e5},eval:function(n){return 1*(n+"").split(/[^0-9.+-]/)[0]},isMin:function(n){return(n+"").indexOf("min")!=-1},timeDiff:function(n,t){return DMath.fixHour(t-n)},twoDigitsFormat:function(n){return n<10?"0"+n:n}}}var DMath={dtr:function(n){return n*Math.PI/180},rtd:function(n){return n*180/Math.PI},sin:function(n){return Math.sin(this.dtr(n))},cos:function(n){return Math.cos(this.dtr(n))},tan:function(n){return Math.tan(this.dtr(n))},arcsin:function(n){return this.rtd(Math.asin(n))},arccos:function(n){return this.rtd(Math.acos(n))},arctan:function(n){return this.rtd(Math.atan(n))},arccot:function(n){return this.rtd(Math.atan(1/n))},arctan2:function(n,t){return this.rtd(Math.atan2(n,t))},fixAngle:function(n){return this.fix(n,360)},fixHour:function(n){return this.fix(n,24)},fix:function(n,t){return n=n-t*Math.floor(n/t),n<0?n+t:n}},prayTimes=new PrayTimes;